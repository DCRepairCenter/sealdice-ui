# 功能模块说明

## 🎯 功能概览

SealDice UI 提供了完整的 TRPG 跑团工具管理界面，涵盖了从基础配置到高级扩展的所有功能模块。

## 🏠 主页模块

### 功能描述
主页是系统的仪表板，提供系统状态监控和日志查看功能。

### 核心功能
- **系统状态监控**
  - 内存使用情况实时显示
  - 网络质量检测（官网、Lagrange Sign、Google、GitHub）
  - 运行时间统计
  - 版本信息展示

- **日志管理**
  - 实时日志流显示
  - 日志级别筛选（info/warn/error）
  - 自动刷新功能
  - 日志导出功能

- **版本升级**
  - 新版本检测
  - 一键升级功能
  - 升级日志查看
  - 容器模式升级限制提示

### 技术实现
- 使用 WebSocket 实现实时日志推送
- 定时轮询获取系统状态
- 响应式布局适配不同屏幕

## 🔗 账号设置模块

### 功能描述
管理各个聊天平台的机器人账号连接，支持多平台同时在线。

### 支持平台

| 平台 | 连接方式 | 特殊配置 |
|------|---------|---------|
| QQ | Gocq/Lagrange/WalleQ | 协议选择、签名服务器 |
| Discord | Bot Token | 代理设置、CDN配置 |
| KOOK | Bot Token | - |
| Telegram | Bot Token | 代理设置 |
| 钉钉 | Client ID + Token | 机器人代码 |
| Slack | Bot Token + App Token | - |
| Minecraft | 服务器地址 | - |
| Dodo | Client ID + Token | - |
| 官方QQ | App ID + Secret | QQ频道支持 |
| OneBot | 正向/反向WebSocket | 访问令牌 |
| Satori | 多平台通用协议 | 平台选择 |

### 核心功能
- **连接管理**
  - 添加新连接
  - 编辑连接配置
  - 启用/禁用连接
  - 删除连接
  - 连接状态监控

- **QQ 特殊功能**
  - 内置客户端支持
  - 签名服务器配置
  - 协议版本选择
  - 设备锁处理
  - 扫码登录支持

- **连接诊断**
  - 连接状态实时显示
  - 错误信息提示
  - 重连机制
  - 日志查看

## 📝 自定义文案模块

### 功能描述
允许用户自定义骰子的各种回复文案，实现个性化配置。

### 文案分类
1. **核心文案**
   - 骰子名字
   - 帮助文本
   - 开启/关闭提示
   - 权限提示
   - 错误提示

2. **COC 规则文案**
   - 检定结果文案（大成功/极难成功/困难成功/成功/失败/大失败）
   - 成长检定文案
   - 理智检定文案
   - 技能描述文案

3. **其他规则文案**
   - DND 规则文案
   - FATE 规则文案
   - WOD 规则文案
   - 自定义规则文案

### 核心功能
- **文案编辑**
  - 可视化编辑器
  - 变量插入支持
  - 预览功能
  - 批量编辑

- **文案管理**
  - 导入/导出文案
  - 文案版本管理
  - 恢复默认设置
  - 文案搜索

- **高级特性**
  - 条件文案（根据条件显示不同文案）
  - 随机文案（从多个文案中随机选择）
  - 嵌套变量支持
  - 正则表达式支持

## 🔧 扩展功能模块

### 自定义回复

**功能描述**：设置触发词和对应的自动回复内容。

**核心功能**：
- 触发条件设置（精确匹配/模糊匹配/正则匹配）
- 回复内容编辑（支持变量和表达式）
- 优先级管理
- 启用/禁用控制
- 作用域设置（全局/群组/私聊）

### 牌堆管理

**功能描述**：创建和管理自定义抽取牌堆。

**核心功能**：
- 牌堆创建（YAML/JSON格式）
- 牌堆编辑器
- 牌堆导入/导出
- 牌堆分享
- 抽取规则设置（有放回/无放回/权重抽取）

**预置牌堆**：
- 塔罗牌
- 调查员背景
- 疯狂症状
- 煤气灯特质
- 自定义牌堆

### 跑团日志

**功能描述**：记录和管理跑团过程中的聊天记录。

**核心功能**：
- 自动记录开关
- 日志查看和搜索
- 日志导出（TXT/HTML/PDF格式）
- 日志编辑和整理
- 日志分享
- 隐私设置

### JS 扩展

**功能描述**：使用 JavaScript 编写自定义扩展功能。

**核心功能**：
- 在线代码编辑器（CodeMirror）
- 语法高亮和自动补全
- API 文档查看
- 脚本管理（上传/下载/删除）
- 脚本市场
- 调试控制台

**API 支持**：
- 消息处理 API
- 数据存储 API
- 网络请求 API
- 定时任务 API

### 帮助文档

**功能描述**：管理骰子的帮助文档内容。

**核心功能**：
- 文档编辑（Markdown支持）
- 文档分类管理
- 文档搜索
- 文档版本控制
- 自定义帮助指令

### 拦截管理

**功能描述**：设置敏感词过滤和消息拦截规则。

**核心功能**：
- 敏感词库管理
- 拦截规则设置
- 拦截日志查看
- 白名单设置
- 拦截动作配置（警告/禁言/踢出）

## ⚙️ 综合设置模块

### 基本设置

**功能描述**：配置骰子的基础参数。

**设置项**：
- **基础配置**
  - 骰子昵称
  - 指令前缀（支持多个）
  - 默认骰子面数
  - 多骰上限设置

- **功能开关**
  - 新人入群欢迎
  - 定时清理功能
  - 自动接受好友请求
  - 自动接受群邀请

- **安全设置**
  - UI 访问密码
  - Master 认证密码
  - 访问控制（IP白名单）
  - 操作日志记录

- **性能设置**
  - 消息处理并发数
  - 缓存大小限制
  - 日志保留时间
  - 自动备份间隔

### 群组管理

**功能描述**：管理所有群组的设置和权限。

**核心功能**：
- **群组列表**
  - 查看所有群组
  - 搜索和筛选
  - 批量操作
  - 群组统计

- **群组设置**
  - 开关机器人
  - 设置管理员
  - 自定义前缀
  - 群欢迎消息

- **权限管理**
  - 指令权限设置
  - 用户权限等级
  - 群组优先级
  - 特殊权限分配

### 黑白名单

**功能描述**：管理用户和群组的访问控制。

**核心功能**：
- **黑名单管理**
  - 添加用户/群组到黑名单
  - 设置封禁原因
  - 设置封禁时长
  - 批量导入/导出

- **白名单管理**
  - 添加信任用户/群组
  - 优先处理设置
  - 免审核设置

- **名单同步**
  - 云端同步
  - 跨实例同步
  - 定期更新

### 公骰设置

**功能描述**：配置公开骰子的相关设置。

**设置项**：
- 公骰名称和描述
- 服务条款
- 使用限制
- 统计信息公开
- 捐赠信息设置

### 备份管理

**功能描述**：管理数据备份和恢复。

**核心功能**：
- **备份操作**
  - 手动备份
  - 自动备份配置
  - 增量备份
  - 选择性备份

- **恢复操作**
  - 完整恢复
  - 部分恢复
  - 回滚功能
  - 恢复点管理

- **备份管理**
  - 备份列表查看
  - 备份下载
  - 备份删除
  - 存储空间管理

### 高级设置

**功能描述**：高级用户的专业配置选项。

**设置项**：
- 调试模式开关
- 性能监控
- 日志级别调整
- 实验性功能开关
- 开发者选项
- 数据库维护
- 缓存清理
- 系统诊断

## 🛠️ 辅助工具模块

### 指令测试

**功能描述**：在 UI 中直接测试骰子指令。

**核心功能**：
- 模拟私聊/群聊环境
- 设置测试用户身份
- 查看完整响应
- 性能分析
- 批量测试

### 资源管理

**功能描述**：管理图片、音频等资源文件。

**核心功能**：
- **资源上传**
  - 拖拽上传
  - 批量上传
  - 格式转换
  - 压缩优化

- **资源管理**
  - 分类管理
  - 标签系统
  - 搜索功能
  - 预览功能

- **资源使用**
  - 快速复制链接
  - 嵌入代码生成
  - 使用统计
  - 清理无用资源

## 🔐 权限体系

### 用户角色

| 角色 | 权限说明 |
|------|---------|
| Master | 最高权限，可以执行所有操作 |
| 管理员 | 可以管理群组和用户，但不能修改系统设置 |
| 群管理 | 只能管理特定群组的设置 |
| 普通用户 | 只能使用基础功能 |
| 黑名单用户 | 无法使用任何功能 |

### 权限控制

- **系统级权限**：Master 独有
- **管理级权限**：管理员以上
- **群组级权限**：群管理以上
- **用户级权限**：所有用户

## 📊 数据统计

### 统计指标

- **使用统计**
  - 日活跃用户数
  - 指令使用次数
  - 群组活跃度
  - 功能使用率

- **性能统计**
  - 响应时间
  - 处理成功率
  - 错误率统计
  - 资源占用

- **趋势分析**
  - 增长趋势
  - 使用习惯
  - 热门功能
  - 问题追踪

## 🔄 工作流程

### 典型使用流程

1. **初始设置**
   ```
   安装 → 基本配置 → 添加连接 → 测试连接
   ```

2. **日常管理**
   ```
   查看日志 → 处理问题 → 调整设置 → 备份数据
   ```

3. **扩展配置**
   ```
   自定义文案 → 添加扩展 → 设置规则 → 优化性能
   ```

## 🎯 最佳实践

### 推荐配置

1. **安全配置**
   - 设置强密码
   - 启用访问控制
   - 定期备份数据
   - 监控异常行为

2. **性能优化**
   - 合理设置并发数
   - 定期清理日志
   - 优化敏感词库
   - 使用缓存机制

3. **用户体验**
   - 自定义友好文案
   - 设置合适的响应速度
   - 提供清晰的帮助文档
   - 及时处理用户反馈

---

> 💡 **提示**：各功能模块相互配合，形成完整的跑团工具管理体系。建议从基础功能开始配置，逐步扩展到高级功能。